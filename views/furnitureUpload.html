<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>Furniture Upload</title>
        <link rel="icon" href="/images/logo_url.ico" type="image/x-icon">
        <link rel="shortcut icon" href="/images/logo_url.ico" type="image/x-icon">
        <!-- Styles -->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700|Poppins:400,600" rel="stylesheet">


        <!-- favicon and touch icons -->
        <link rel="shortcut icon" href="/images/favicon.png" >

        <!-- Bootstrap -->
        <link href="/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
        <link href="/plugins/slick/slick.css" rel="stylesheet">
        <link href="/plugins/slick-nav/slicknav.css" rel="stylesheet">
        <link href="/plugins/wow/animate.css" rel="stylesheet">
        <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">
        <link href="/stylesheets/theme.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
        <link rel="stylesheet" type="text/css" href="/stylesheets/responsive.css">
        <link href="/stylesheets/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
        <link href="/stylesheets/explorer-fa/theme.css" rel="stylesheet">

        <style>
            .file-preview-thumbnails {
                width: 100%;
                height: 100%;
                float: left;
            }
        </style>
    </head>
    <body class="">
        <div id="page-loader">
            <div class="loaders">
                <img src="/images/loader/3.gif" alt="First Loader">
                <img src="/images/loader/4.gif" alt="First Loader">
            </div>
        </div>
        <header id="site-header">
            <% include header.html %>
        </header>
        
        <div class="container">
            <div class="row">
                <div class="col-md-12" style="background:#fff;margin-bottom:50px;">
                    <div class="box-checkout">
                        <!-- <h3 class="title">Checkout</h3>
                        <div class="checkout-login">
                            Returning customer? <a href="#" title="">Click here to login</a>
                        </div> -->
                        <form id="furniture" name="furniture" class="checkout" accept-charset="utf-8">
                            <div class="billing-fields">
                                <div class="fields-title">
                                    <h3>Furniture details</h3>
                                    <span></span>
                                    <div class="clearfix"></div>
                                </div><!-- /.fields-title -->
                                <div class="fields-content">
                                    <div class="field-row">
                                        <p class="field-one-half">
                                            <label for="furniture-name">Furniture Name *</label>
                                            <input type="text" id="furniture-name" name="furniture-name">
                                        </p>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="field-row">
                                        <p class="field-one-half">
                                            <label for="price">Price *</label>
                                            <input type="text" id="price" name="price">
                                        </p>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="field-row">
                                        <p class="field-one-half">
                                            <label for="picture">Picture *</label>
                                            <div class="form-group">
                                                <div class="file-loading">
                                                    <label>Preview File Icon</label>
                                                    <input id="picture" type="file" multiple>
                                                </div>
                                            </di>
                                        </p>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="field-row">
                                        <p class="field-one-half">
                                            <label for="email-address">Email Address *</label>
                                            <input type="email" id="email-address" name="email-address">
                                        </p>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="field-row">
                                        <p class="field-one-half">
                                            <label for="phone">Phone *</label>
                                            <input type="text" id="phone" name="phone">
                                        </p>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="field-row">
                                        <label for="address">Address *</label>
                                        <input type="text" id="address" name="address" placeholder="Street address">
                                    </div>
                                    <div class="field-row">
                                            <div style="margin-bottom:20px">Type *</div>
                                            <div class="checkbox" style="margin:0 0 0 10px;width:100px;display:inline-block">
                                                <input type="checkbox" id="rent" name="rent">
                                                <label for="rent">Rent</label>
                                            </div> 
                                            <div class="checkbox" style="margin:0 0 0 10px;width:100px;display:inline-block">
                                                <input type="checkbox" id="sell" name="sell">
                                                <label for="sell">Sell</label>
                                            </div>
                                    </div>
                                </div><!-- /.fields-content -->
                            </div><!-- /.billing-fields -->
                            <div class="shipping-address-fields0">
                                    <div class="field-row0">
                                        <label for="notes">Furniture Description</label>
                                        <textarea id="notes" placeholder="Notes about your order, e.g. special notes for delivery."></textarea>
                                    </div>
                                </div><!-- /.<%-user.name%>-->
                            </div>
                            <div class="form-group">
                                <button type="button"  onclick="uploadFurniture('<%-user.name%>')" style="margin-top:20px;" class="btn btn-primary btn-block" id="upload">Submit</button>
                            </div>
                        </form><!-- /.checkout -->
                    </div>
                </div>
            </div>
        </div>
        
        <footer id="footer">
            <% include footer.html %>
        </footer>

        <a href="#top" id="scroll-top"><i class="fa fa-angle-up"></i></a>
        
        <script src="/javascripts/jquery.min.js"></script>
        <script src="/javascripts/jquery.migrate.js"></script>
        <script src="/javascripts/bootstrap.min.js"></script>
        <script src="/plugins/slick-nav/jquery.slicknav.min.js"></script>

        <script src="/plugins/fileinput/sortable.js" type="text/javascript"></script>
        <script src="/javascripts/fileinput.js" type="text/javascript"></script>
        <script src="/plugins/locales/fr.js" type="text/javascript"></script>
        <script src="/plugins/locales/es.js" type="text/javascript"></script>
        <script src="/plugins/explorer-fa/theme.js" type="text/javascript"></script>
        <script src="/plugins/fa/theme.js" type="text/javascript"></script>
        <script src="/plugins/slick/slick.min.js"></script>
        <script src="/plugins/jquery-ui/jquery-ui.min.js"></script>
        <script src="/plugins/forms/jquery.form.min.js"></script>
        <script src="/plugins/forms/jquery.validate.min.js"></script>
        <script src="/plugins/modernizr/modernizr.custom.js"></script>
        <script src="/plugins/wow/wow.min.js"></script>
        <script src="/plugins/zoom/zoom.js"></script>
        <script src="/plugins/mixitup/mixitup.min.js"></script>
        <script src="/javascripts/theme.js"></script>
        <script>
            $("#picture").fileinput({
                theme: 'fa',
                showUpload: false,
                showCaption: false,
                browseClass: "btn btn-primary btn-lg",
                fileType: "any",
                previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
                overwriteInitial: true,
                initialPreviewAsData: true,
                initialPreview: [
                        
                ],
                initialPreviewConfig: [
                    
                ]
            });
            $(".logout").click(function() {      
                 $.ajax({
                     url:'/logout',
                     type:'GET',
                     success: function(data,status){
                         if(status == 'success'){
                             //$("#" + _id).val(tmp);
                             location.href = '/';
                         }
                     },
                     error: function(data,status){
                         if(status == 'error'){
                            alert("fail to logout");
                         }
                     }
                 });
            });
            function uploadFurniture(username){ 
                var furnitureName = $("#furniture-name").val(),
                    price = $("#price").val(),
                    picture = $("#picture").prop("files"),
                    email = $("#email").val(),
                    phone = $("#phone").val(), 
                    address = $("#address").val(), 
                    rent = $("#rent").prop("checked"), 
                    sell = $("#sell").prop("checked"), 
                    notes = $("#notes").val();
                var form_data = new FormData();
                for (i = 0; i < picture.length; i++) {
                      form_data.append("file" + i + "", picture[i]); 
                }
                form_data.append("name", furnitureName);
                form_data.append("price", price);
                form_data.append("email", email);
                form_data.append("phone", phone);
                form_data.append("address", address);
                form_data.append("notes", notes);
                form_data.append("username", username);
                form_data.append("rent", rent);
                form_data.append("sell", sell);

                $.ajax({ 
                    url:'/furnitureUpload',
                    type:'POST',
                    data: form_data,
                    contentType: false, 
                    processData: false,
                    success: function(data,status){ 
                        if(status == 'success'){ 
                            location.href = 'list';
                        }
                    },
                    error: function(data,status){ 
                        if(status == 'error'){ 
                            //location.href = 'login';
                        }
                    }
                });
            };
        </script>
    </body>
</html>

    
